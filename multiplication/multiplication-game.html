<!--
    Multiplication Game for Kids
    Powered by Claude AI (Anthropic) and Oleksandr Kazimirov
    https://claude.ai
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Multiplication Game</title>
    <style>
        *{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#f5f7fa,#e4e8ec);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px}
        .container{width:100%;max-width:500px}
        .screen{display:none;background:#fff;border-radius:24px;padding:32px;box-shadow:0 10px 40px rgba(0,0,0,.1)}
        .screen.active{display:block;animation:fadeIn .3s ease}
        @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        @keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-8px)}40%,80%{transform:translateX(8px)}}
        @keyframes popIn{0%{transform:scale(.5)}50%{transform:scale(1.1)}100%{transform:scale(1)}}
        h1,h2{text-align:center;color:#333;margin-bottom:24px}
        h1{font-size:28px;margin-bottom:32px}
        h2{font-size:24px}
        .setting-group{margin-bottom:24px}
        .setting-label{display:block;font-size:16px;color:#666;margin-bottom:12px;font-weight:500}
        .slider-container{display:flex;align-items:center;gap:16px}
        .slider{flex:1;height:8px;-webkit-appearance:none;background:#e0e0e0;border-radius:4px;outline:none}
        .slider::-webkit-slider-thumb{-webkit-appearance:none;width:28px;height:28px;background:#4A90D9;border-radius:50%;cursor:pointer;box-shadow:0 2px 8px rgba(74,144,217,.4)}
        .slider-value{font-size:24px;font-weight:600;color:#4A90D9;min-width:40px;text-align:center}
        .select-wrapper{position:relative}
        .select-wrapper::after{content:'';position:absolute;right:20px;top:50%;transform:translateY(-50%);border:6px solid transparent;border-top-color:#666;pointer-events:none}
        select{width:100%;padding:16px 20px;font-size:18px;border:2px solid #e0e0e0;border-radius:12px;background:#fff;color:#333;cursor:pointer;appearance:none;outline:none;transition:border-color .2s}
        select:focus{border-color:#4A90D9}
        .settings-row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
        .fixed-mode-settings{transition:opacity .3s;overflow:hidden}
        .fixed-mode-settings.hidden{opacity:.4;pointer-events:none}
        .btn{display:block;width:100%;padding:18px 32px;font-size:20px;font-weight:600;border:none;border-radius:16px;cursor:pointer;transition:transform .1s,box-shadow .2s;margin-bottom:12px}
        .btn:last-child{margin-bottom:0}
        .btn:active{transform:scale(.97)}
        .btn-primary{background:linear-gradient(135deg,#4A90D9,#357ABD);color:#fff;box-shadow:0 4px 15px rgba(74,144,217,.4)}
        .btn-secondary{background:linear-gradient(135deg,#66BB6A,#43A047);color:#fff;box-shadow:0 4px 15px rgba(76,175,80,.4)}
        .btn-outline{background:#fff;color:#4A90D9;border:2px solid #4A90D9;box-shadow:none}
        .btn-outline:active{background:#f5f7fa}
        .progress-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;padding:12px 16px;background:#f5f7fa;border-radius:12px}
        .progress-text,.mistakes,.remaining,.timer{font-size:18px;font-weight:500}
        .progress-text{color:#666}
        .timer{color:#F57C00;font-family:monospace;font-size:20px}
        .mistakes{color:#E53935}
        .remaining{color:#4A90D9}
        .problem{text-align:center;font-size:48px;font-weight:700;color:#333;margin-bottom:24px;padding:24px;background:#f5f7fa;border-radius:16px;letter-spacing:4px}
        .problem .unknown{color:#4A90D9;font-weight:800}
        .answer-display{text-align:center;font-size:42px;font-weight:700;color:#333;padding:20px;margin-bottom:20px;background:#f5f7fa;border-radius:16px;min-height:80px;display:flex;align-items:center;justify-content:center;transition:background .3s,transform .1s}
        .answer-display.correct{background:#E8F5E9;color:#2E7D32}
        .answer-display.wrong{background:#FFEBEE;color:#C62828;animation:shake .4s ease}
        .numpad{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:20px}
        .num-btn{padding:20px;font-size:28px;font-weight:600;border:none;border-radius:16px;background:#f0f0f0;color:#333;cursor:pointer;transition:background .1s,transform .1s}
        .num-btn:active{background:#e0e0e0;transform:scale(.95)}
        .num-btn.clear{background:#FFEBEE;color:#E53935}
        .num-btn.zero{grid-column:span 2}
        .score-summary{text-align:center;padding:24px;background:linear-gradient(135deg,#E3F2FD,#BBDEFB);border-radius:16px;margin-bottom:24px}
        .score-summary.success{background:linear-gradient(135deg,#E8F5E9,#C8E6C9)}
        .score-big{font-size:48px;font-weight:700;color:#1976D2}
        .score-summary.success .score-big{color:#2E7D32}
        .score-percent{font-size:20px;color:#666;margin-top:8px}
        .results-list{max-height:300px;overflow-y:auto;margin-bottom:24px;border:2px solid #e0e0e0;border-radius:16px}
        .result-item{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #f0f0f0;font-size:18px}
        .result-item:last-child{border-bottom:none}
        .result-item.correct{background:#F1F8E9}
        .result-item.wrong{background:#FFEBEE}
        .result-problem{font-weight:600;color:#333}
        .result-status{font-weight:600}
        .result-status.correct{color:#2E7D32}
        .result-status.wrong{color:#C62828}
        .game-over-message{text-align:center;padding:20px;background:#FFEBEE;border-radius:12px;margin-bottom:20px;color:#C62828;font-weight:600;font-size:18px}
        .game-over-message.success{background:#E8F5E9;color:#2E7D32}
        .congrats-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;visibility:hidden;transition:opacity .3s,visibility .3s}
        .congrats-overlay.show{opacity:1;visibility:visible}
        .congrats-popup{background:#fff;padding:40px;border-radius:24px;text-align:center;transform:scale(.8);transition:transform .3s;box-shadow:0 20px 60px rgba(0,0,0,.3)}
        .congrats-overlay.show .congrats-popup{transform:scale(1);animation:popIn .4s ease}
        .congrats-emoji{font-size:64px;margin-bottom:16px}
        .congrats-text{font-size:28px;font-weight:700;color:#4CAF50;margin-bottom:8px}
        .congrats-subtext{font-size:18px;color:#666}
        .combo-info{font-size:14px;color:#999;margin-top:8px;text-align:center}
        .number-selector{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:24px}
        .number-btn{padding:16px;font-size:24px;font-weight:700;border:3px solid #e0e0e0;border-radius:16px;background:#fff;color:#333;cursor:pointer;transition:all .2s}
        .number-btn:active{transform:scale(.95)}
        .number-btn.selected{background:linear-gradient(135deg,#4A90D9,#357ABD);color:#fff;border-color:#357ABD;box-shadow:0 4px 15px rgba(74,144,217,.4)}
        .multiplication-table{background:linear-gradient(135deg,#FFF8E1,#FFECB3);border-radius:16px;padding:24px;margin-bottom:24px}
        .table-title{text-align:center;font-size:24px;font-weight:700;color:#F57C00;margin-bottom:20px}
        .table-content{display:flex;flex-direction:column;gap:8px}
        .table-row{display:flex;justify-content:center;align-items:center;font-size:22px;font-weight:600;color:#333;padding:8px 16px;background:rgba(255,255,255,.7);border-radius:8px}
        .table-row span{min-width:30px}
        .table-row .multiplier{color:#F57C00;text-align:right}
        .table-row .operator,.table-row .equals{color:#666;margin:0 8px;min-width:auto}
        .table-row .result{color:#2E7D32;font-weight:700;min-width:40px;text-align:right}
        .learn-hint{text-align:center;color:#666;font-size:16px;margin-bottom:16px}
    </style>
</head>
<body>
    <div class="container">
        <div id="menu-screen" class="screen active">
            <h1>Multiplication Game</h1>
            <button id="play-btn" class="btn btn-primary">PLAY</button>
            <button id="learn-btn" class="btn btn-secondary">LEARN</button>
        </div>

        <div id="settings-screen" class="screen">
            <h2>Game Settings</h2>
            <div class="setting-group">
                <label class="setting-label">Practice numbers up to:</label>
                <div class="slider-container">
                    <input type="range" id="max-number" class="slider" min="2" max="10" value="10">
                    <span id="max-number-value" class="slider-value">10</span>
                </div>
                <div id="combo-count" class="combo-info"></div>
            </div>
            <div class="setting-group">
                <label class="setting-label">Question Type:</label>
                <div class="select-wrapper">
                    <select id="game-mode">
                        <option value="result">Find the Result (A x B = ?)</option>
                        <option value="multiplier">Find the Multiplier (? x B = Z)</option>
                    </select>
                </div>
            </div>
            <div class="setting-group">
                <label class="setting-label">Session Type:</label>
                <div class="select-wrapper">
                    <select id="session-type">
                        <option value="fixed">Fixed Tasks</option>
                        <option value="practice-all">Practice All Tables</option>
                        <option value="practice-one">Practice One Table</option>
                    </select>
                </div>
            </div>
            <div id="practice-one-settings" class="practice-one-settings" style="display:none">
                <div class="setting-group">
                    <label class="setting-label">Select table to practice:</label>
                    <div class="number-selector" id="practice-one-selector"></div>
                </div>
            </div>
            <div id="fixed-mode-settings" class="fixed-mode-settings">
                <div class="settings-row">
                    <div class="setting-group">
                        <label class="setting-label">Tasks:</label>
                        <div class="select-wrapper">
                            <select id="total-tasks">
                                <option value="5">5</option>
                                <option value="10" selected>10</option>
                                <option value="15">15</option>
                                <option value="20">20</option>
                            </select>
                        </div>
                    </div>
                    <div class="setting-group">
                        <label class="setting-label">Max Mistakes:</label>
                        <div class="select-wrapper">
                            <select id="max-mistakes">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3" selected>3</option>
                                <option value="0">Unlimited</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <button id="start-btn" class="btn btn-primary">START</button>
            <button class="btn btn-outline" onclick="showScreen('menu')">BACK</button>
        </div>

        <div id="learn-screen" class="screen">
            <h2>Learn Tables</h2>
            <p class="learn-hint">Select a number to see its multiplication table:</p>
            <div class="number-selector" id="number-selector"></div>
            <div id="multiplication-table" class="multiplication-table" style="display:none">
                <div class="table-title" id="table-title"></div>
                <div class="table-content" id="table-content"></div>
            </div>
            <button class="btn btn-outline" onclick="showScreen('menu')">BACK TO MENU</button>
        </div>

        <div id="game-screen" class="screen">
            <div class="progress-bar">
                <span id="progress" class="progress-text"></span>
                <span id="timer-display" class="timer">00:00</span>
                <span id="mistakes-display"></span>
            </div>
            <div id="problem" class="problem"></div>
            <div id="answer-display" class="answer-display"></div>
            <div class="numpad" id="numpad"></div>
            <button id="check-btn" class="btn btn-primary">CHECK</button>
        </div>

        <div id="results-screen" class="screen">
            <h2>Results</h2>
            <div id="game-over-msg" class="game-over-message" style="display:none"></div>
            <div id="score-summary" class="score-summary">
                <div id="score-display" class="score-big"></div>
                <div id="percent-display" class="score-percent"></div>
            </div>
            <div id="results-list" class="results-list"></div>
            <button id="play-again-btn" class="btn btn-primary">PLAY AGAIN</button>
            <button class="btn btn-outline" onclick="resetAndShowMenu()">BACK TO MENU</button>
        </div>
    </div>

    <div id="congrats-overlay" class="congrats-overlay">
        <div class="congrats-popup">
            <div class="congrats-emoji" id="congrats-emoji"></div>
            <div class="congrats-text" id="congrats-text"></div>
            <div class="congrats-subtext" id="congrats-subtext"></div>
        </div>
    </div>

<script>
var $ = function(id) { return document.getElementById(id); },
    congratsMsg = [
        ['üåü','Great job!'],['üéâ','Amazing!'],['üèÜ','Fantastic!'],['‚≠ê','Super star!'],
        ['üöÄ','Excellent!'],['üî•',"You're on fire!"],['üëè','Keep it up!'],
        ['üí™','Math champion!'],['üéØ','Brilliant!'],['‚ú®','Outstanding!']
    ],
    S = {
        maxNum:10, practiceNum:5, mode:'result', session:'fixed', tasks:10, maxMist:3,
        task:0, mist:0, streak:0, ans:'', used:new Set(), queue:[], mastered:new Set(), history:[], prob:null,
        startTime:0, elapsedTime:0, timerInterval:null
    },
    screens = ['menu','settings','learn','game','results'];

function showScreen(name) {
    screens.forEach(function(s) { $(s+'-screen').classList.remove('active'); });
    $(name+'-screen').classList.add('active');
}

function resetAndShowMenu() {
    $('score-summary').classList.remove('success');
    showScreen('menu');
}

function pairKey(a,b) { return a<b ? a+'x'+b : b+'x'+a; }
function rand(min,max) { return Math.floor(Math.random()*(max-min+1))+min; }
function shuffle(arr) {
    for(var i=arr.length-1;i>0;i--) { var j=rand(0,i); var t=arr[i]; arr[i]=arr[j]; arr[j]=t; }
    return arr;
}

function calcCombos(max) {
    return (max - 1) * 10; // Tables 2 to max, each with 10 problems (√ó1 to √ó10)
}

function updateComboCount() {
    var max = parseInt($('max-number').value);
    $('combo-count').textContent = 'Practice All: Tables 2-'+max+' ('+calcCombos(max)+' tasks)';
}

function formatTime(ms) {
    var s=Math.floor(ms/1000), m=Math.floor(s/60);
    s=s%60;
    return (m<10?'0':'')+m+':'+(s<10?'0':'')+s;
}

function updateTimer() {
    S.elapsedTime = Date.now() - S.startTime;
    $('timer-display').textContent = formatTime(S.elapsedTime);
}

function createProb(a,b) {
    if(Math.random()>.5) { var t=a; a=b; b=t; }
    var p = {a:a, b:b, result:a*b, answer:a*b, key:pairKey(a,b)};
    if(S.mode==='multiplier') {
        if(Math.random()>.5) { p.hidden='a'; p.answer=a; }
        else { p.hidden='b'; p.answer=b; }
    }
    return p;
}

function genAllProbs() {
    var probs=[];
    for(var a=2;a<=S.maxNum;a++) for(var b=1;b<=10;b++) probs.push(createProb(a,b));
    return shuffle(probs);
}

function genOneTableProbs(num) {
    var probs=[];
    for(var b=1;b<=10;b++) probs.push(createProb(num,b));
    return shuffle(probs);
}

function genProb() {
    var a,b,att=0;
    do { a=rand(2,S.maxNum); b=rand(2,10); if(Math.random()>.5){var t=a;a=b;b=t;} att++; }
    while(S.used.has(pairKey(a,b)) && att<100);
    S.used.add(pairKey(a,b));
    return createProb(a,b);
}

function nextProb() {
    var isPractice = S.session==='practice-all'||S.session==='practice-one';
    return isPractice ? (S.queue.length?S.queue.shift():null) : genProb();
}

function displayProb() {
    var p=S.prob, h;
    if(S.mode==='result') h=p.a+' x '+p.b+' = <span class="unknown">?</span>';
    else h = (p.hidden==='a'?'<span class="unknown">?</span>':p.a)+' x '+(p.hidden==='b'?'<span class="unknown">?</span>':p.b)+' = '+p.result;
    $('problem').innerHTML = h;
}

function updateProgress() {
    var md=$('mistakes-display');
    if(S.session==='practice-all'||S.session==='practice-one') {
        var tot = S.session==='practice-one' ? 10 : calcCombos(S.maxNum);
        $('progress').textContent = 'Mastered: '+S.mastered.size+' / '+tot;
        md.textContent = 'Remaining: '+S.queue.length;
        md.className = 'remaining';
    } else {
        $('progress').textContent = (S.task+1)+' / '+S.tasks;
        md.className = 'mistakes';
        md.textContent = 'Mistakes: '+S.mist+(S.maxMist>0?' / '+S.maxMist:'');
    }
}

function showCongrats() {
    var m=congratsMsg[rand(0,congratsMsg.length-1)];
    $('congrats-emoji').textContent=m[0];
    $('congrats-text').textContent=m[1];
    $('congrats-subtext').textContent=S.streak+' correct in a row!';
    $('congrats-overlay').classList.add('show');
    setTimeout(function(){$('congrats-overlay').classList.remove('show');},1500);
}

function showTable(num) {
    document.querySelectorAll('.number-btn').forEach(function(b){
        b.classList.toggle('selected', parseInt(b.dataset.num)===num);
    });
    $('table-title').textContent = 'Table of '+num;
    var h='';
    for(var i=1;i<=10;i++) h+='<div class="table-row"><span class="multiplier">'+num+'</span><span class="operator">x</span><span>'+i+'</span><span class="equals">=</span><span class="result">'+(num*i)+'</span></div>';
    $('table-content').innerHTML=h;
    $('multiplication-table').style.display='block';
}

function startGame() {
    S.maxNum=parseInt($('max-number').value);
    S.mode=$('game-mode').value;
    S.session=$('session-type').value;
    S.tasks=parseInt($('total-tasks').value);
    S.maxMist=parseInt($('max-mistakes').value);
    S.task=S.mist=S.streak=0; S.ans='';
    S.used.clear(); S.mastered.clear(); S.history=[];
    if(S.session==='practice-all') S.queue=genAllProbs();
    else if(S.session==='practice-one') S.queue=genOneTableProbs(S.practiceNum);
    else S.queue=[];
    S.prob=nextProb();
    S.startTime=Date.now();
    if(S.timerInterval) clearInterval(S.timerInterval);
    S.timerInterval=setInterval(updateTimer,1000);
    $('timer-display').textContent='00:00';
    displayProb(); updateProgress();
    $('answer-display').textContent='';
    $('answer-display').className='answer-display';
    showScreen('game');
}

function checkAnswer() {
    if(!S.ans) return;
    var ua=parseInt(S.ans), correct=ua===S.prob.answer;
    S.history.push({prob:S.prob, ua:ua, correct:correct});
    var ad=$('answer-display');
    ad.classList.add(correct?'correct':'wrong');

    var isPractice = S.session==='practice-all'||S.session==='practice-one';
    if(correct) {
        S.streak++;
        if(isPractice) S.mastered.add(S.prob.key);
        if(S.streak>0 && S.streak%5===0) setTimeout(showCongrats,300);
    } else {
        S.streak=0; S.mist++;
        // Show correct answer
        ad.innerHTML=S.ans+' <span style="color:#666;font-size:24px">‚Üí</span> '+S.prob.answer;
        if(isPractice) {
            var rp=createProb(S.prob.a,S.prob.b);
            S.queue.splice(Math.min(S.queue.length,rand(3,7)),0,rp);
        }
    }

    var gameOver=false, success=false;
    if(isPractice) { gameOver=!S.queue.length; success=gameOver; }
    else {
        var mistOver=S.maxMist>0&&S.mist>=S.maxMist, taskOver=S.task>=S.tasks-1;
        gameOver=mistOver||taskOver; success=taskOver&&!mistOver;
    }

    setTimeout(function(){
        if(gameOver) {
            if(S.timerInterval) { clearInterval(S.timerInterval); S.timerInterval=null; }
            S.elapsedTime=Date.now()-S.startTime;
            showResults(success);
        } else {
            S.task++; S.ans=''; S.prob=nextProb();
            displayProb(); updateProgress();
            ad.textContent='';
            ad.className='answer-display';
        }
    }, correct?500:1500);
}

function showResults(success) {
    var cc=S.history.filter(function(h){return h.correct;}).length;
    var tot=S.history.length, pct=tot?Math.round(cc/tot*100):0;
    var ss=$('score-summary'), gm=$('game-over-msg');
    var timeStr = formatTime(S.elapsedTime);

    if(S.session==='practice-all'||S.session==='practice-one') {
        var c = S.session==='practice-one' ? 10 : calcCombos(S.maxNum);
        var label = S.session==='practice-one' ? 'Table of '+S.practiceNum : 'All tables';
        $('score-display').textContent=c+' / '+c;
        $('percent-display').innerHTML=label+' mastered in <strong>'+timeStr+'</strong>';
        ss.classList.add('success');
        gm.textContent='Congratulations! You mastered all '+c+' problems!';
        gm.className='game-over-message success';
        gm.style.display='block';
    } else {
        $('score-display').textContent=cc+' / '+tot;
        $('percent-display').innerHTML=pct+'% correct ‚Ä¢ Time: <strong>'+timeStr+'</strong>';
        ss.classList.remove('success');
        if(!success&&S.maxMist>0) {
            gm.textContent='Game Over - Too many mistakes!';
            gm.className='game-over-message';
            gm.style.display='block';
        } else gm.style.display='none';
    }

    // Show only mistakes
    var mistakes=[];
    var seen=new Set();
    S.history.forEach(function(h){
        if(!h.correct) {
            var k=h.prob.a+'x'+h.prob.b;
            if(!seen.has(k)) { seen.add(k); mistakes.push(h); }
        }
    });

    var html='';
    if(mistakes.length===0) {
        html='<div class="result-item correct" style="justify-content:center;color:#2E7D32;font-weight:600">No mistakes! Perfect!</div>';
    } else {
        mistakes.forEach(function(h){
            var p=h.prob;
            html+='<div class="result-item wrong"><span class="result-problem">'+p.a+' x '+p.b+' = <s style="color:#999">'+h.ua+'</s> '+p.result+'</span><span class="result-status wrong">‚úó</span></div>';
        });
    }
    $('results-list').innerHTML=html;
    showScreen('results');
}

// Init
(function(){
    // Number selector buttons
    var ns='';
    for(var i=2;i<=10;i++) ns+='<button class="number-btn" data-num="'+i+'">'+i+'</button>';
    $('number-selector').innerHTML=ns;
    $('practice-one-selector').innerHTML=ns;

    // Numpad buttons
    var np='';
    for(var i=1;i<=9;i++) np+='<button class="num-btn" data-num="'+i+'">'+i+'</button>';
    np+='<button class="num-btn zero" data-num="0">0</button><button class="num-btn clear" data-num="clear">C</button>';
    $('numpad').innerHTML=np;

    // Set default selection for practice-one
    S.practiceNum=5;
    setTimeout(function(){
        var btns=$('practice-one-selector').querySelectorAll('.number-btn');
        btns.forEach(function(b){b.classList.toggle('selected',parseInt(b.dataset.num)===5);});
    },0);

    // Events
    $('play-btn').onclick=function(){showScreen('settings');};
    $('learn-btn').onclick=function(){
        $('multiplication-table').style.display='none';
        document.querySelectorAll('#number-selector .number-btn').forEach(function(b){b.classList.remove('selected');});
        showScreen('learn');
    };
    $('max-number').oninput=function(e){$('max-number-value').textContent=e.target.value;updateComboCount();};
    $('session-type').onchange=function(e){
        var v=e.target.value;
        $('fixed-mode-settings').classList.toggle('hidden',v!=='fixed');
        $('practice-one-settings').style.display=v==='practice-one'?'block':'none';
    };
    $('start-btn').onclick=startGame;
    $('check-btn').onclick=checkAnswer;
    $('play-again-btn').onclick=function(){$('score-summary').classList.remove('success');showScreen('settings');};

    document.querySelectorAll('#number-selector .number-btn').forEach(function(b){
        b.onclick=function(){showTable(parseInt(b.dataset.num));};
    });

    $('practice-one-selector').querySelectorAll('.number-btn').forEach(function(b){
        b.onclick=function(){
            S.practiceNum=parseInt(b.dataset.num);
            $('practice-one-selector').querySelectorAll('.number-btn').forEach(function(btn){
                btn.classList.toggle('selected',parseInt(btn.dataset.num)===S.practiceNum);
            });
        };
    });

    document.querySelectorAll('.num-btn').forEach(function(b){
        b.onclick=function(){
            var n=b.dataset.num;
            if(n==='clear') S.ans='';
            else if(S.ans.length<3) S.ans+=n;
            $('answer-display').textContent=S.ans;
            $('answer-display').className='answer-display';
        };
    });

    document.onkeydown=function(e){
        if(!$('game-screen').classList.contains('active')) return;
        if(e.key>='0'&&e.key<='9'&&S.ans.length<3) { S.ans+=e.key; $('answer-display').textContent=S.ans; $('answer-display').className='answer-display'; }
        else if(e.key==='Backspace') { S.ans=S.ans.slice(0,-1); $('answer-display').textContent=S.ans; }
        else if(e.key==='Enter') checkAnswer();
    };

    updateComboCount();
})();
</script>
</body>
</html>
